<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Basic Page Needs -->
    <title>Linux References</title>
    <meta charset="utf-8" />
    <meta name="description" content="Tech and D&amp;D, what more could you want?">
    <meta name="author" content="Ethan House">
    <!-- Mobile Specific Metas  -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/theme/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/theme/css/skeleton.css">
    <link rel="stylesheet" type="text/css" href="/theme/css/ehouse.css">
    <link href="/theme/css/pygments.css" rel="stylesheet">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/theme/images/favicon.png">
  </head>
  <body>
    <!-- Primary Page Layout -->
    <div class="container">
      <div class="row">
        <div class="column">
          <div id="nav">
            <ul>
                <li><a href="/">Blog</a></li>
                <li><a href="/projects.html">Projects</a></li>
                <li><a href="/dd.html">D&amp;D</a></li>
                <li><a href="/about.html">About</a></li>
            </ul>
          </div> <!-- #nav -->
          <div id="headerImage">
            <img alt="Train Bridge at Swarthmore College crossing Crum Creek" src="/theme/images/wide_bridge.jpg" />
          </div> <!-- #headerImage -->
<h2><a href="./linux-references.html" rel="bookmark" title="Permalink to Linux References">Linux References</a></h2>
<div class="article-list">
<p>Common actions for RHEL based distros.</p>
<h2>Journalctl</h2>
<ul>
<li>
<dl>
<dt><code>journal --since 9:00 --until 12:00</code></dt>
<dd>Shows system logs between those times</dd>
</dl>
</li>
<li>
<dl>
<dt><code>journal -u postfix --since yesterday -f</code></dt>
<dd>Shows all postfix logs since yesterday and follows logs</dd>
</dl>
</li>
<li>
<dl>
<dt><code>journal -k -n 20</code></dt>
<dd>Kernal messags since last boot limiting to 20 messages</dd>
</dl>
</li>
</ul>
<h2>Selinux</h2>
<ul>
<li>
<dl>
<dt><code>cat /var/log/audit/audit.log | audit2why</code></dt>
<dd>Explains every AVC report.</dd>
<dd>Requires <em>policycoreutils</em></dd>
</dl>
</li>
<li>
<dl>
<dt><code>audit2allow -a -w</code></dt>
<dd>Same as above</dd>
<dd>Requires <em>policycoreutils</em></dd>
</dl>
</li>
<li>
<dl>
<dt><code>audit2allow -a</code></dt>
<dd>Generates readable selinux policy from audit/audit.log</dd>
<dd>Requires <em>policycoreutils</em></dd>
</dl>
</li>
</ul>
<h5>Generating Generic Modules</h5>
<ul>
<li>
<dl>
<dt><code>audit2allow -a -M POLICYNAME</code></dt>
<dd>Generates selinux policy from audit/audit.log POLICYNAME</dd>
<dd>Requires <em>policycoreutils</em></dd>
</dl>
</li>
<li>
<dl>
<dt><code>semodule -i POLICYNAME.pp</code></dt>
<dd>load policy POLICYNAME</dd>
<dd>Requires <em>policycoreutils</em></dd>
</dl>
</li>
</ul>
<h4>Generate Custome Module</h4>
<ul>
<li>
<dl>
<dt><code>audit2allow -a -m POLICYNAME</code></dt>
<dd>Generates uncompiled selinux policy from audit/audit.log named POLICYNAME and create POLICYNAME.te</dd>
<dd>Requires <em>policycoreutils</em></dd>
</dl>
</li>
<li>
<dl>
<dt><code>checkmodule -M -m -o POLICYNAME.mod POLICYNAME.te</code></dt>
<dd>Generate mod from from POLICYNAME.te</dd>
<dd>Requires <em>policycoreutils</em></dd>
</dl>
</li>
<li>
<dl>
<dt><code>semodule_package -m POLICYNAME.mod -o POLICYNAME.pp</code></dt>
<dd>Compile mod file to POLICYNAME.pp</dd>
<dd>Requires <em>policycoreutils</em></dd>
</dl>
</li>
</ul>
<h4>Searching</h4>
<ul>
<li>
<dl>
<dt><code>ausearch -m avc -ts recent</code></dt>
<dd>Get recent (10 minutes) of AVC messages</dd>
<dd>Requires <em>audit</em></dd>
</dl>
</li>
<li>
<dl>
<dt><code>seleart -a /var/log/audit/audit.log</code></dt>
<dd>Generates a report of AVC messages and why they are happening</dd>
<dd>Requires <em>setroubleshoot-server</em></dd>
</dl>
</li>
</ul>
</div>
          <div class="footer">
            <ul>
                <li><a href="https://github.com/ehouse">Github</a></li>
                <li><a href="https://keybase.io/ehouse">Keybase</a></li>
                <li><a href="https://twitter.com/ewhhouse">Twitter</a></li>
            </ul>
            <p>Page generated by <a href="http://getpelican.com/">Pelican</a>. Theme Available on my <a href="https://github.com/ehouse/blog">Github</a>.</p>
            <p>&copy; Ethan House 2013 - 2016</p>
          </div> <!-- #footer -->
        </div> <!-- .column -->
      </div> <!-- .row -->
    </div> <!-- .container -->
  </body>
</html>